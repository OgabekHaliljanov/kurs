<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <form class=" inputform" id="inputForm">
        <label for="firstName">Имя:</label>
        <input type="text" id="firstName" name="firstName"><br><br>
        <label for="lastName">Фамилия:</label>
        <input type="text" id="lastName" name="lastName"><br><br>
        <label for="lastName">Oylik</label>
        <input type="text" id="oylik">
        <button type="button" id="saveButton">koshish</button>
    </form>
    <div class="lp">
        <div id="displayContainer"></div>
    </div>
    <script  >
        document.addEventListener('DOMContentLoaded', () => {
  const firstNameInput = document.getElementById('firstName');
  const lastNameInput = document.getElementById('lastName');
  const saveButton = document.getElementById('saveButton');
  const displayContainer = document.getElementById('displayContainer');

  // Load saved data from localStorage
  function loadSavedData() {
      const savedData = localStorage.getItem('displayData');
      if (savedData) {
          const displayData = JSON.parse(savedData);
          displayData.forEach(item => {
              createDisplayBox(item.firstName, item.lastName, item.fine, item.timestamp);
          });
      }
  }
  

  function saveDataToLocalStorage() {
      const displayData = [];
      const displayBoxes = displayContainer.querySelectorAll('.display-box');
      displayBoxes.forEach(box => {
          const firstName = box.querySelector('p:nth-child(1)').textContent.replace('Имя: ', '');
          const lastName = box.querySelector('p:nth-child(2)').textContent.replace('Фамилия: ', '');
          const fine = box.querySelector('.fine-text').textContent.replace('Штраф: ', '');
          const timestamp = box.dataset.timestamp;
          displayData.push({ firstName, lastName, fine, timestamp });
      });
      localStorage.setItem('displayData', JSON.stringify(displayData));
  }

  function createDisplayBox(firstName, lastName, fine = '', timestamp = Date.now()) {
      const displayBox = document.createElement('div');
      displayBox.className = 'display-box';
      displayBox.dataset.timestamp = timestamp;
      displayBox.innerHTML = `
          <p>Имя: ${firstName}</p>
          <p>Фамилия: ${lastName}</p>
        
          <input type="text" class="fine-input" name="fine" value="${fine}">
          <button class="save-fine-button">Сохранить Штраф</button>
          <p class="fine-text" style="display: ${fine ? 'block' : 'none'};">Штраф: ${fine}</p>
          <button class="delete-button">Удалить</button>
      `;

  
      const deleteButton = displayBox.querySelector('.delete-button');
      deleteButton.addEventListener('click', () => {
          displayContainer.removeChild(displayBox);
          saveDataToLocalStorage();
      });

     
      const saveFineButton = displayBox.querySelector('.save-fine-button');
      saveFineButton.addEventListener('click', () => {
          const fineInput = displayBox.querySelector('.fine-input');
          const fineText = displayBox.querySelector('.fine-text');
          fineText.textContent = `Штраф: ${fineInput.value}`;
          fineText.style.display = 'block';
          fineInput.style.display = 'none';
          saveFineButton.style.display = 'none';
          saveDataToLocalStorage();
      });

      displayContainer.appendChild(displayBox);

   
      const timeRemaining = 60 * 1000 - (Date.now() - timestamp);
      setTimeout(() => {
          displayBox.classList.add('red');
      }, timeRemaining > 0 ? timeRemaining : 0);

      saveDataToLocalStorage();
  }

  saveButton.addEventListener('click', () => {
      const firstName = firstNameInput.value;
      const lastName = lastNameInput.value;
      if (firstName.trim() !== "" && lastName.trim() !== "") {
          createDisplayBox(firstName, lastName);
          firstNameInput.value = ''; 
          lastNameInput.value = ''; 
      }
  });

  loadSavedData();
});document.addEventListener('DOMContentLoaded', () => {
    const firstNameInput = document.getElementById('firstName');
    const lastNameInput = document.getElementById('lastName');
    const saveButton = document.getElementById('saveButton');
    const displayContainer = document.getElementById('displayContainer');

    // Load saved data from localStorage
    function loadSavedData() {
        const savedData = localStorage.getItem('displayData');
        if (savedData) {
            const displayData = JSON.parse(savedData);
            displayData.forEach(item => {
                createDisplayBox(item.firstName, item.lastName, item.fine, item.timestamp);
            });
        }
    }
    

    function saveDataToLocalStorage() {
        const displayData = [];
        const displayBoxes = displayContainer.querySelectorAll('.display-box');
        displayBoxes.forEach(box => {
            const firstName = box.querySelector('p:nth-child(1)').textContent.replace('Имя: ', '');
            const lastName = box.querySelector('p:nth-child(2)').textContent.replace('Фамилия: ', '');
            const fine = box.querySelector('.fine-text').textContent.replace('Штраф: ', '');
            const timestamp = box.dataset.timestamp;
            displayData.push({ firstName, lastName, fine, timestamp });
        });
        localStorage.setItem('displayData', JSON.stringify(displayData));
    }

    function createDisplayBox(firstName, lastName, fine = '', timestamp = Date.now()) {
        const displayBox = document.createElement('div');
        displayBox.className = 'display-box';
        displayBox.dataset.timestamp = timestamp;
        displayBox.innerHTML = `
            <p>Имя: ${firstName}</p>
            <p>Фамилия: ${lastName}</p>
          
            <input type="text" class="fine-input" name="fine" value="${fine}">
            <button class="save-fine-button">Сохранить Штраф</button>
            <p class="fine-text" style="display: ${fine ? 'block' : 'none'};">Штраф: ${fine}</p>
            <button class="delete-button">Удалить</button>
        `;

    
        const deleteButton = displayBox.querySelector('.delete-button');
        deleteButton.addEventListener('click', () => {
            displayContainer.removeChild(displayBox);
            saveDataToLocalStorage();
        });

       
        const saveFineButton = displayBox.querySelector('.save-fine-button');
        saveFineButton.addEventListener('click', () => {
            const fineInput = displayBox.querySelector('.fine-input');
            const fineText = displayBox.querySelector('.fine-text');
            fineText.textContent = `Штраф: ${fineInput.value}`;
            fineText.style.display = 'block';
            fineInput.style.display = 'none';
            saveFineButton.style.display = 'none';
            saveDataToLocalStorage();
        });

        displayContainer.appendChild(displayBox);

     
        const timeRemaining = 60 * 1000 - (Date.now() - timestamp);
        setTimeout(() => {
            displayBox.classList.add('red');
        }, timeRemaining > 0 ? timeRemaining : 0);

        saveDataToLocalStorage();
    }

    saveButton.addEventListener('click', () => {
        const firstName = firstNameInput.value;
        const lastName = lastNameInput.value;
        if (firstName.trim() !== "" && lastName.trim() !== "") {
            createDisplayBox(firstName, lastName);
            firstNameInput.value = ''; 
            lastNameInput.value = ''; 
        }
    });

    loadSavedData();
});
    </script>
</body>
</html>